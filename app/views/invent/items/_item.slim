.row ng-controller="EditInventItemCtrl as edit"
  .form-group ng-if="edit.additional.statusesForChangeItem | contains:edit.item_o.item.status"
    p.info-block.bg-warning
      span ng-if="edit.item_o.item.status == 'prepared_to_swap'"
        | {{ edit.item_o.item.type.short_description }} будет перемещен в текущее рабочее место
      span ng-if="edit.item_o.item.status == 'waiting_bring'"
        | Данный {{ edit.item_o.item.type.short_description | lowercase }} пользователь должен сдать в УИВТ
      span ng-if="edit.item_o.item.status == 'waiting_take'"
        | Данный {{ edit.item_o.item.type.short_description | lowercase }} пользователь должен получить в УИВТ

  -# Постоянные параметры.
  .col-md-9.col-lg-10.col-xlg-9
    .form-group
      = label_tag :workplace_items__id, "ID", class: "control-label"
  .col-md-15.col-lg-14.col-xlg-15
    .form-group
      div.form-control ng-bind="edit.item_o.item.id" disabled=true

  .col-md-9.col-lg-10.col-xlg-9
    .form-group
      = label_tag :workplace_items__invent_num, "Инвентарный номер", class: "control-label"
  .col-md-15.col-lg-14.col-xlg-15
    div ng-if="edit.additional.pcTypes | contains:edit.item_o.item.type.name"
      .form-group
        .input-group
          = text_field_tag "workplace[items][][invent_num]", "", class: "form-control", "ng-model": "edit.item_o.item.invent_num"
          .input-group-btn
            = button_tag type: :button, class: "btn-default", "data-toggle": "dropdown" do
              ' Данные
              span.caret
            ul.dropdown-menu.dropdown-menu-right
              li= link_to "Получить автоматически", "", "ng-click": "edit.getAuditData()",
                "disable-link": true
              li= link_to "Внести вручную", "", "ng-click": "edit.runManuallyPcDialog()",
                "disable-link": true
            = button_tag type: :button, class: "btn-default", "ng-click": "edit.FillWithDefaultData()", "uib-tooltip": "Заполнить поля ПК тестовыми данными", "tooltip-append-to-body": "true" do
              = fa_icon "list"
    div ng-if="!(edit.additional.pcTypes | contains:edit.item_o.item.type.name)"
      .form-group
        = text_field_tag "workplace[items][][invent_num]", "", class: "form-control", "ng-model": "edit.item_o.item.invent_num"

  - if !current_user.role? :***REMOVED***_user
    .col-md-9.col-lg-10.col-xlg-9
      .form-group
        = label_tag :workplace_items__priority, "Приоритет обслуживания", class: "control-label"
    .col-md-15.col-lg-14.col-xlg-15
      .form-group
        = select_tag "workplace[items][][priority]", "", class: "form-control", "ng-model": "edit.item_o.item.priority",
          "ng-options": "priority as translated for (priority, translated) in edit.item_o.item.priorities"

  .col-md-9.col-lg-10.col-xlg-9
    .form-group
      = label_tag :workplace_items__serial_num, "Серийный номер", class: "control-label"
  .col-md-15.col-lg-14.col-xlg-15
    .form-group
      = text_field_tag "workplace[items][][serial_num]", "", class: "form-control", "ng-model": "edit.item_o.item.serial_num"

  .col-md-9.col-lg-10.col-xlg-9
      .form-group
        = label_tag :workplace_items__item_model, "Модель", class: "control-label"
  .col-md-15.col-lg-14.col-xlg-15
    -# Если модель необходимо ввести вручную (так как нет вариантов для данного аида техники).
    div ng-if="!edit.item_o.item.type.models.length"
      .form-group
        = text_field_tag "workplace[items][][item_model]", "", class: "form-control", "ng-model": "edit.item_o.item.item_model"

      -# Если модель необходимо выбрать или ввести вручную, так как варианты из списка не подходят.
    div ng-if="edit.item_o.item.type.models.length"
      .form-group
        = select_tag "workplace[items][][model_id]", "", class: "form-control", "ng-change": "edit.changeItemModel()", "ng-model": "edit.item_o.item.model",
          "ng-options": "model as model.item_model disable when model.model_id == -1 for model in edit.item_o.item.type.models track by model.model_id"

      div ng-if="!edit.item_o.item.model_id"
        .form-group
          label Введите наименование модели
          = text_field_tag "workplace[items][][item_model]", "", class: "form-control", "ng-model": "edit.item_o.item.item_model"

  -# Переменные параметры.
  div{ ng-repeat="prop in edit.item_o.item.type.properties track by $index"
  ng-if="edit.item_o.item.model_id != -1 || edit.item_o.item.type.models.length == 0" ng-hide="prop._destroy" }
    .col-md-9.col-lg-10.col-xlg-9
      .form-group
        label ng-bind="prop.short_description"
    .col-md-15.col-lg-14.col-xlg-15
      .form-group
        div ng-switch=true on="prop.property_type"
          div ng-switch-when="string"
            = text_field_tag "", "", class: "form-control", "ng-disabled": "edit.additional.pcTypes | contains:edit.item_o.item.type.name",
              "ng-model": "edit.item_o.item.property_values_attributes[$index].value"

          div ng-switch-when="list"
            = select_tag "", "", class: "form-control", "ng-disabled": "edit.item_o.item.property_values_attributes[$index].filteredList.length == 1",
              "ng-model": "edit.item_o.item.property_values_attributes[$index].property_list_id",
              "ng-options": "prop_list.property_list_id as prop_list.short_description disable when prop_list.property_list_id == -1 for prop_list in edit.item_o.item.property_values_attributes[$index].filteredList"

          div ng-switch-when="list_plus"
            .form-group
              = select_tag "", "", class: "form-control",
                "ng-disabled": "edit.item_o.item.property_values_attributes[$index].filteredList.length == 1",
                "ng-model": "edit.item_o.item.property_values_attributes[$index].property_list_id",
                "ng-options": "prop_list.property_list_id as prop_list.short_description disable when prop_list.property_list_id == -1 for prop_list in edit.item_o.item.property_values_attributes[$index].filteredList"

            div ng-if="!edit.item_o.item.model_id && !edit.item_o.item.property_values_attributes[$index].property_list_id"
              .form-group
                label Введите {{prop.short_description | lowercase }}
                = text_field_tag "workplace[items][][property_values][value]", "", class: "form-control",
                  "ng-model": "edit.item_o.item.property_values_attributes[$index].value"
